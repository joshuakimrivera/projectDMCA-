{% extends 'base.html' %}
{% block title %}Divine Miracle Christian Academy|Login{% endblock title %}
{% block content %}
{% load static %}
<div>
  <div style="height: 50px;"></div>
  <div>
    <!--LOGIN STRUCTURE -->  
    <form action="." method="POST"  onsubmit="loading()">
    <!--TOKEN-->
    {% csrf_token %}

      <!-- CARD CONTAINER -->
      <div class="container">
        <div class="grid-example col s6 m12 center">
          <div class="card blue-grey lighten-5 z-depth-4 roundElement">
            <div class="card-content white-text">
              <div class="row">
                <div class="center-align"><img src="{% static "img/DMCA logo.png" %}" alt="" class="circle responsive-img" style="height: 200px;"></div>
              </div>
              <span class="card-title flow-text black-text">Login</span>
                     
              <!-- TEXT input box-->
              <div class="container black-text">
                <form class="center">
                  <div class="row">

                    <!--INPUT EMAIL-->
                    <div class="input-field flow-text">
                      <i class="material-icons prefix">account_circle</i>
                      <input type="email" name="username" autofocus maxlength="254" required id="id_username" />
                      <label for="id_username">Email:</label>
                    </div>

                    <!--INPUT PASSWORD-->
                    <div class="input-field flow-text">
                      <i class="material-icons prefix">vpn_key</i>
                      <input type="password" name="password" required id="id_password" />  
                      <label for="id_password">Password:</label>
                      {% if form.errors %}
                      <span class="helper-text red-text">Your username and password didn't match. Please try again.</span>
                    </div>
                  </div>
                </form>
              </div>          
              {% endif %} 
              <div id="loadingBar" class="progress center hiddendiv">
                <div class="indeterminate"></div>
                <h8> Logging In</h8>
              </div>
              <button id="loginButton" type="submit" class="btn btn-large hoverable waves-effect waves-light orange accent-3 tooltipped" data-tooltip="Login"><i class="material-icons right">send</i> Login</button>
            </div>
            <div class="card-action center">
              
            </div>
            <a href="{% url 'password_reset' %}" class="tooltipped" data-tooltip="Forgot Password?"><i>forgot password?</i></a>
            <div style="height: 10px;"></div>

          </div>
        </div>
      </div>
    </form>
  </div>
  <div style="height: 100px;"></div>
</div>

<!--SCRIPT CONTENT-->

<!--LOADING FUNCTION-->
<script>
  //LOADING FUNCTION
  // function loading(){
  //   document.getElementById("loginButton").style.display='hidden';
  //   //document.getElementById("exln").style.visibility='hidden';
  //   document.getElementById("lod").style.visibility='visible';
  // }
  function loading() {
    var loginButton = document.getElementById("loginButton");
    var loadingBar = document.getElementById("loadingBar");
    loadingBar.classList.remove("hiddendiv");
    loginButton.classList.add("hiddendiv");
}
</script>


<!--END OF SCRIPT CONTENT-->

{% endblock content %}