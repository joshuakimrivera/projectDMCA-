<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Divine Miracle Christian Academy|Administrator|View Users</title>
</head>
<body>
    <a href="{% url 'administrator:create_user' %}">Add New User</a><br/>
    <table border="1">
        <th>Full Name</th>
        <th>Email</th>
        <th>Account Type</th>
        <th>Account Status</th>
        <th>Birthday</th>
        <th>Address</th>
        <th>Level and Section</th>
        <th>Contact Number</th>
        <th>Contact Person</th>
        <th>Options</th>
        {% for user in users %}
        <tr>
            <td>{{ user.get_full_name }}</td>
            <td>{{ user.email }}</td>
            <td>
                {% if user.is_student %}
                    Student
                {% elif user.is_teacher %}
                    Teacher
                {% elif user.is_staff %}
                    Staff
                {% endif %}
            </td>
            <td>
                {% if user.is_active %}
                    Active
                {% else %}
                    Inactive
                {% endif %}
            </td>
            <td>{{ user.date_of_birth }}</td>
            <td>{{ user.address }}</td>
            {% if user.profile is not None %}
                {% if user.is_staff %}
                <td>N/A</td>
                {% else %}
                    <td>{{ user.profile.level_and_section.level }}</td>
                {% endif %}
                <td>{{ user.profile.phone_number }}</td>
                <td>{{ user.profile.contact_person }}</td>
            {% else %}
                <td>Not Set</td>
                <td>Not Set</td>
                <td>Not Set</td>
            {% endif %}
            <td>
                <a 
                href="{% url 'administrator:delete_user' user.id %}" 
                onclick="return confirm('Are you sure you want to DELETE {{user.get_full_name}}?')">
                    Delete
                </a>
                <a href="{% url 'administrator:edit_user' user.id %}">Edit</a>
            </td>
            
        </tr>
        {% endfor %}
    </table>
    <div class="pagination">
        <span class="step-links">
            {% if users.has_previous %}
                <a href="?page=1">&laquo; first</a>
                <a href="?page={{ users.previous_page_number }}">previous</a>
            {% endif %}
        
            <span class="current">
                Page {{ users.number }} of {{ users.paginator.num_pages }}.
            </span>
        
            {% if users.has_next %}
                <a href="?page={{ users.next_page_number }}">next</a>
                <a href="?page={{ users.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
</body>
</html>